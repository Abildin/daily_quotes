// Generated by CoffeeScript 1.9.1
var app;

app = angular.module('mainApp', []);

app.config(function($interpolateProvider) {
  $interpolateProvider.startSymbol('{[{');
  return $interpolateProvider.endSymbol('}]}');
});

app.controller('MainCtrl', function($http, $timeout) {
  var $this;
  return $this = {
    selected: null,
    quotes: [],
    getQuotes: function() {
      return $http({
        method: "GET",
        url: $this.hostname + "/api/v1/quote/"
      }).success(function(result) {
        $this.meta = result.meta;
        $this.quotes = result.objects;
        return console.log($this.quotes);
      }).error(function(error) {
        return console.error(error);
      });
    },
    init: function(url) {
      $this.hostname = url;
      return $this.getQuotes();
    },
    select: function(quote) {
      return $this.selected = quote;
    },
    cancel: function() {
      return $this.selected = nulle;
    },
    save: function() {
      console.log($this.hostname + $this.selected.resource_uri);
      return $http.patch({
        url: $this.hostname + $this.selected.resource_uri,
        data: {
          data: $this.selected.date,
          quote: $this.selected.quote,
          source: $this.selected.source
        }
      }).success(function(result) {
        console.log(result);
        return $this.getQuotes();
      }).error(function(error) {
        return console.error(error);
      });
    },
    "delete": function() {
      console.log($this.hostname + $this.selected.resource_uri);
      return $http({
        method: "DELETE",
        url: $this.hostname + $this.selected.resource_uri
      }).success(function(result) {
        console.log(result);
        return $this.getQuotes();
      }).error(function(error) {
        return console.error(error);
      });
    }
  };
});
